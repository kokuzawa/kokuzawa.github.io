<!DOCTYPE html>
<html lang="ja-jp">
	<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Katsumi Kokuzawa">

<meta name="generator" content="Hugo 0.31" />
<title>Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0</title>
<link rel="shortcut icon" href="https://kokuzawa.github.io/images/favicon.ico">
<link rel="stylesheet" href="https://kokuzawa.github.io/css/style.css">
<link rel="stylesheet" href="https://kokuzawa.github.io/css/highlight.css">



<link rel="stylesheet" href="https://kokuzawa.github.io/css/monosocialiconsfont.css">




<meta property="og:title" content="Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0" />
<meta property="og:description" content="JSFのMessagesコンポーネントは、Managed Beanで設定されたFacesMessageを出力する為のコンポーネントです。 出力方法は、listとTableの二つのレイアウトを利用した方法があり、デフォルトはlistレイアウトです。 listレイアウトは以下のような出力になります。
(Bootstrapのalert alert-errorを適用)
これに対してTableレイアウトは以下のような出力になります。
どちらもエラーを表示するには十分ですが、ユーザとしては確認したらエラー情報を消したいところです。 MessagesコンポーネントはHTMLをカスタマイズする事ができません。 正確にはレンダラをカスタマイズすれば、出力するHTMLを書き換える事が出来ますし、 そういった情報を扱ったブログもありますが、Messagesレンダラのカスタマイズは、 com.sunパッケージのクラスを継承して拡張する必要があり、JSFの実装依存のコードになってしまいます。 もちろん独自で一からレンダラを書いても良いのですが、あまり現実的ではありません。 そこで、標準のMessagesコンポーネントではなくBootstrapのAlertsコンポーネントを使うことにします。
BootstrapのAlertsコンポーネントはクローズボタンを表示する事ができます。 このクローズボタンをクリックする事により、エラー情報を消すことができます。 クローズボタンを出すには、HTMLを下記のように記載する必要があります。
&lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;Summary Message&lt;/h4&gt; Detail Message &lt;/div&gt;  これをJSF合成コンポーネントにします。 webapp/resources/bootstrapフォルダを作成し、alert.xhtmlファイルを配置します。(フォルダ構成はMavenです)
alert.xhtml:
&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt; &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:cc=&quot;http://java.sun.com/jsf/composite&quot; xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;&gt; &lt;!-- INTERFACE --&gt; &lt;cc:interface&gt; &lt;/cc:interface&gt; &lt;!-- IMPLEMENTATION --&gt; &lt;cc:implementation&gt; &lt;c:forEach var=&quot;message&quot; items=&quot;#{facesContext.messageList}&quot;&gt; &lt;c:if test=&quot;#{message.severity == &#39;ERROR 2&#39;}&quot;&gt; &lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;#{message." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kokuzawa.github.io/posts/blog/2013/01/13/facesmessagetobootstrap/" />



<meta property="article:published_time" content="2013-01-13T18:46:00&#43;09:00"/>

<meta property="article:modified_time" content="2013-01-13T18:46:00&#43;09:00"/>













<meta itemprop="name" content="Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0">
<meta itemprop="description" content="JSFのMessagesコンポーネントは、Managed Beanで設定されたFacesMessageを出力する為のコンポーネントです。 出力方法は、listとTableの二つのレイアウトを利用した方法があり、デフォルトはlistレイアウトです。 listレイアウトは以下のような出力になります。
(Bootstrapのalert alert-errorを適用)
これに対してTableレイアウトは以下のような出力になります。
どちらもエラーを表示するには十分ですが、ユーザとしては確認したらエラー情報を消したいところです。 MessagesコンポーネントはHTMLをカスタマイズする事ができません。 正確にはレンダラをカスタマイズすれば、出力するHTMLを書き換える事が出来ますし、 そういった情報を扱ったブログもありますが、Messagesレンダラのカスタマイズは、 com.sunパッケージのクラスを継承して拡張する必要があり、JSFの実装依存のコードになってしまいます。 もちろん独自で一からレンダラを書いても良いのですが、あまり現実的ではありません。 そこで、標準のMessagesコンポーネントではなくBootstrapのAlertsコンポーネントを使うことにします。
BootstrapのAlertsコンポーネントはクローズボタンを表示する事ができます。 このクローズボタンをクリックする事により、エラー情報を消すことができます。 クローズボタンを出すには、HTMLを下記のように記載する必要があります。
&lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;Summary Message&lt;/h4&gt; Detail Message &lt;/div&gt;  これをJSF合成コンポーネントにします。 webapp/resources/bootstrapフォルダを作成し、alert.xhtmlファイルを配置します。(フォルダ構成はMavenです)
alert.xhtml:
&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt; &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:cc=&quot;http://java.sun.com/jsf/composite&quot; xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;&gt; &lt;!-- INTERFACE --&gt; &lt;cc:interface&gt; &lt;/cc:interface&gt; &lt;!-- IMPLEMENTATION --&gt; &lt;cc:implementation&gt; &lt;c:forEach var=&quot;message&quot; items=&quot;#{facesContext.messageList}&quot;&gt; &lt;c:if test=&quot;#{message.severity == &#39;ERROR 2&#39;}&quot;&gt; &lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;#{message.">


<meta itemprop="datePublished" content="2013-01-13T18:46:00&#43;09:00" />
<meta itemprop="dateModified" content="2013-01-13T18:46:00&#43;09:00" />
<meta itemprop="wordCount" content="99">



<meta itemprop="keywords" content="Java,JavaEE,JSF,Bootstrap," />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0"/>
<meta name="twitter:description" content="JSFのMessagesコンポーネントは、Managed Beanで設定されたFacesMessageを出力する為のコンポーネントです。 出力方法は、listとTableの二つのレイアウトを利用した方法があり、デフォルトはlistレイアウトです。 listレイアウトは以下のような出力になります。
(Bootstrapのalert alert-errorを適用)
これに対してTableレイアウトは以下のような出力になります。
どちらもエラーを表示するには十分ですが、ユーザとしては確認したらエラー情報を消したいところです。 MessagesコンポーネントはHTMLをカスタマイズする事ができません。 正確にはレンダラをカスタマイズすれば、出力するHTMLを書き換える事が出来ますし、 そういった情報を扱ったブログもありますが、Messagesレンダラのカスタマイズは、 com.sunパッケージのクラスを継承して拡張する必要があり、JSFの実装依存のコードになってしまいます。 もちろん独自で一からレンダラを書いても良いのですが、あまり現実的ではありません。 そこで、標準のMessagesコンポーネントではなくBootstrapのAlertsコンポーネントを使うことにします。
BootstrapのAlertsコンポーネントはクローズボタンを表示する事ができます。 このクローズボタンをクリックする事により、エラー情報を消すことができます。 クローズボタンを出すには、HTMLを下記のように記載する必要があります。
&lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;Summary Message&lt;/h4&gt; Detail Message &lt;/div&gt;  これをJSF合成コンポーネントにします。 webapp/resources/bootstrapフォルダを作成し、alert.xhtmlファイルを配置します。(フォルダ構成はMavenです)
alert.xhtml:
&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt; &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:cc=&quot;http://java.sun.com/jsf/composite&quot; xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;&gt; &lt;!-- INTERFACE --&gt; &lt;cc:interface&gt; &lt;/cc:interface&gt; &lt;!-- IMPLEMENTATION --&gt; &lt;cc:implementation&gt; &lt;c:forEach var=&quot;message&quot; items=&quot;#{facesContext.messageList}&quot;&gt; &lt;c:if test=&quot;#{message.severity == &#39;ERROR 2&#39;}&quot;&gt; &lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;#{message."/>
<meta name="twitter:site" content="@https://www.twitter.com/kokuzawa"/>


    </head>
<body>
    <nav class="main-nav">
	
		<a href='https://kokuzawa.github.io/'> <span class="arrow">←</span>Home</a>
	

	
 		<a href='https://kokuzawa.github.io/about/'>About</a>
  	

	
</nav>

    <section id="wrapper">
        
        
<article class="post">
    <header>
        <h1>Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0</h1>
        <h2 class="subtitle"></h2>
        <h2 class="headline">
        January 13, 2013
        <br>
        
        
            
                <a href="https://kokuzawa.github.io/tags/java">Java</a>
            
                <a href="https://kokuzawa.github.io/tags/javaee">JavaEE</a>
            
                <a href="https://kokuzawa.github.io/tags/jsf">JSF</a>
            
                <a href="https://kokuzawa.github.io/tags/bootstrap">Bootstrap</a>
            
        
        
        </h2>
    </header>
    <section id="post-body">
        <p>JSFのMessagesコンポーネントは、Managed Beanで設定されたFacesMessageを出力する為のコンポーネントです。
出力方法は、listとTableの二つのレイアウトを利用した方法があり、デフォルトはlistレイアウトです。
listレイアウトは以下のような出力になります。<br />
(Bootstrapの<code>alert alert-error</code>を適用)</p>

<p><img src="https://kokuzawa.github.io/images/post_image_1.png" alt="" /></p>

<p>これに対してTableレイアウトは以下のような出力になります。</p>

<p><img src="https://kokuzawa.github.io/images/post_image_2.png" alt="" /></p>

<p>どちらもエラーを表示するには十分ですが、ユーザとしては確認したらエラー情報を消したいところです。
MessagesコンポーネントはHTMLをカスタマイズする事ができません。
正確にはレンダラをカスタマイズすれば、出力するHTMLを書き換える事が出来ますし、
そういった情報を扱ったブログもありますが、Messagesレンダラのカスタマイズは、
com.sunパッケージのクラスを継承して拡張する必要があり、JSFの実装依存のコードになってしまいます。
もちろん独自で一からレンダラを書いても良いのですが、あまり現実的ではありません。
そこで、標準のMessagesコンポーネントではなくBootstrapのAlertsコンポーネントを使うことにします。</p>

<p>BootstrapのAlertsコンポーネントはクローズボタンを表示する事ができます。
このクローズボタンをクリックする事により、エラー情報を消すことができます。
クローズボタンを出すには、HTMLを下記のように記載する必要があります。</p>

<pre><code class="language-html">&lt;div class=&quot;alert alert-error&quot;&gt;
    &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt;
    &lt;h4&gt;Summary Message&lt;/h4&gt;
    Detail Message
&lt;/div&gt;
</code></pre>

<p>これをJSF合成コンポーネントにします。
webapp/resources/bootstrapフォルダを作成し、alert.xhtmlファイルを配置します。(フォルダ構成はMavenです)</p>

<p><strong>alert.xhtml:</strong></p>

<pre><code class="language-html">&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; 
      &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:cc=&quot;http://java.sun.com/jsf/composite&quot;
      xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;&gt;

    &lt;!-- INTERFACE --&gt;
    &lt;cc:interface&gt;
    &lt;/cc:interface&gt;

    &lt;!-- IMPLEMENTATION --&gt;
    &lt;cc:implementation&gt;
        &lt;c:forEach var=&quot;message&quot; items=&quot;#{facesContext.messageList}&quot;&gt;
            &lt;c:if test=&quot;#{message.severity == 'ERROR 2'}&quot;&gt;
                &lt;div class=&quot;alert alert-error&quot;&gt;
                    &lt;button type=&quot;button&quot; class=&quot;close&quot; 
                            data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt;
                    &lt;h4&gt;#{message.summary}&lt;/h4&gt;
                    #{message.detail}
                &lt;/div&gt;
            &lt;/c:if&gt;
        &lt;/c:forEach&gt;
    &lt;/cc:implementation&gt;
&lt;/html&gt;
</code></pre>

<p>JSF合成コンポーネントはinterfaceの部分にコンポーネントの属性を、implementationの部分に実装を書きます。
今回は属性は不要なので、実装部分だけになります。
FacesMessageはFacesContext.messageListから取得します。
コンポーネントはエラーメッセージが設定されている場合のみ表示します。
エラーメッセージはFacesMessage.severityがFacesMessage.SEVERITY_ERRORのものになりますが、
EL式ではStatic fieldを比較値として比較できません。
そのため、FacesMessage.SEVERITY_ERRORの文字列表現である&rsquo;ERROR 2&rsquo;と比較し、一致するものをエラーメッセージとして判定します。
また、複数設定されている場合を考慮して、forEachを利用し、FacesMessageの数だけAlertsコンポーネントを表示します。</p>

<p>配置したJSF合成コンポーネントは、<a href="http://java.sun.com/jsf/composite/bootstrap">http://java.sun.com/jsf/composite/bootstrap</a> というネームスペースで利用できます。
<a href="http://java.sun.com/jsf/composite/">http://java.sun.com/jsf/composite/</a> にフォルダ名であるbootstrapを付けるだけです。</p>

<pre><code class="language-html">&lt;html xmlns:bs=&quot;http://java.sun.com/jsf/composite/bootstrap&quot;&gt;
    &lt;bs:alert/&gt;
&lt;/html&gt;
</code></pre>

<p>実際に表示すると以下のようになります。</p>

<p><img src="https://kokuzawa.github.io/images/post_image_3.png" alt="" /></p>

<p>エラーメッセージの右上にクローズボタンが表示され、クリックする事によりメッセージを閉じることができるようになりました。</p>

    </section>
</article>

<footer id="post-meta" class="clearfix">
    <a href="https://twitter.com/kokuzawa">
    <img class="avatar" src="https://kokuzawa.github.io/images/avatar.png">
    <div>
        <span class="dark">Katsumi Kokuzawa</span>
        <span></span>
    </div>
    </a>
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fkokuzawa.github.io%2fposts%2fblog%2f2013%2f01%2f13%2ffacesmessagetobootstrap%2f - Convert%20the%20Alerts%20component%20of%20%27Bootstrap%27%20to%20a%20component%20of%20JSF%202.0 by @kokuzawa"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

    </section>
</footer>

<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Katsumii" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<ul id="post-list" class="archive readmore">
    <h3>Read more</h3>

    
    
    
        <li>
            <a href="https://kokuzawa.github.io/posts/my-first-post/">Hugoで始めるブログ生活<aside class="dates">Nov 24 2017</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/12/25/jdbcrealm-with-wildfly-9-dot-0-1-dot-final/">JdbcRealm with WildFly 9.0.1.Final<aside class="dates">Dec 25 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/12/20/server-sent-events/">Server Sent Events<aside class="dates">Dec 20 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/12/10/testfx/">JavaFXのUIをJUnit形式でテストする<aside class="dates">Dec 10 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/11/22/wildfly-swarmdeejbwoshi-su/">WildFly SwarmでEJBを試す<aside class="dates">Nov 22 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/11/16/wildfly-swarmdejsfwoshi-su/">WildFly SwarmでJSFを試す<aside class="dates">Nov 16 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/11/14/wildfly-swarmdejaxrswoshi-su/">WildFly SwarmでJAXRSを試す<aside class="dates">Nov 14 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/10/15/stream-in-jaxrs/">JAX-RSでStreamを扱う<aside class="dates">Oct 15 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/05/07/continue-translate-google/">Googleのテキスト読み上げAPIを組み込む（その２）<aside class="dates">May 7 2015</aside></a>
        </li>
    
        <li>
            <a href="https://kokuzawa.github.io/posts/blog/2015/05/03/translate-google/">Googleのテキスト読み上げAPIを組み込む<aside class="dates">May 3 2015</aside></a>
        </li>
    
</ul>



        <footer id="footer">
    
        <div id="social">

	
	
    
    <a class="symbol" href="https://github.com/kokuzawa">
        circlegithub
    </a>
    
    <a class="symbol" href="https://www.twitter.com/kokuzawa">
        circletwitterbird
    </a>
    


</div>

    
    <p class="small">
    
        © Copyright 2017 Katsumi Kokuzawa
    
    </p>
</footer>

    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://kokuzawa.github.io/js/main.js"></script>
<script src="https://kokuzawa.github.io/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>
</html>
