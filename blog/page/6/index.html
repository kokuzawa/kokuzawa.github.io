<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.31" />

<link rel="alternate" type="application/rss+xml" title="RSS" href="https://kokuzawa.github.io/blog/index.xml">

<link rel="canonical" href="https://kokuzawa.github.io/blog/">


    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>Blogs - Katsumi Kokuzawa&#39;s Blog</title>
    
    <link href="https://kokuzawa.github.io/css/styles.css" rel="stylesheet">
    

  </head>

  <body>
    
    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-36546771-1', 'auto');
ga('send', 'pageview');
</script>

    

    <header class="l-header">
      <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://kokuzawa.github.io/">Katsumi Kokuzawa&#39;s Blog</a>
          </div>

          
          <div id="navbar" class="collapse navbar-collapse">
            
            <ul class="nav navbar-nav navbar-right">
              
              
              <li><a href="https://kokuzawa.github.io/about/">About</a></li>
              
              
            </ul>
            
          </div>
          

        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        
<div class="row">
  <div class="col-md-8">

    
    <header class="page-header">
      <h1>Blogs</h1>
    </header>
    

    <ul class="p-articles">
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-06-14T01:53:00JST">Jun 14, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/06/14/javaee7-release/">JavaEE 7 リリース！</a></h2>
  </header>

  
  <div class="summary">JavaEE 7 がというかGlassFish 4 がリリースされた。
会社でテストサーバとして使っているのは、GlassFish 3.1.2.2 なので早速入れ替えてみた。 余談だが運用サーバはTomcatなので、どちらかというとテストサーバの方が性能が良い。
で、意気揚々と起動してみた訳なのだが、起動できない。
理由は単純で、GlassFish 4 はJDK7が必須にもかかわらず、プロジェクトのJDKのバージョンがJDK6なのである。 まあコンパイル時にサーバのクラスのバージョンよりも古いバージョンでコンパイルしているよ、という警告が出ていたので 何となくは思っていたのだが、改めて起動できないとちょっとショックではある。
ひとまず、DataSourceの設定が今までと同じように出来ることは確認したので、 それについて書こうと思う。
ドライバの配置 GlassFishで利用できるJDBCドライバには下記のものがある。
Administration Guide:
 ■ IBM DB2 Database Type 2 Driver
■ IBM DB2 Database Type 4 Driver
■ Java DB/Derby Type 4 Driver
■ MySQL Server Database Type 4 Driver
■ Oracle 10 Database Driver
■ Oracle 11 Database Driver
■ PostgreSQL Type 4 Driver
■ DataDirect Type 4 Driver for IBM DB2 Database</div>

  
  <footer>
    <a href="https://kokuzawa.github.io/blog/2013/06/14/javaee7-release/" title="JavaEE 7 リリース！">Read More…</a>
  </footer>
  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-06-10T03:10:00JST">Jun 10, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/06/10/load-images-within-css-resources-in-jsf-2-dot-0/">JSF2.0でCSSリソース内の画像を読み込む</a></h2>
  </header>

  
  <div class="summary"> JSF 2.0 でCSSリソース内の画像を読み込むにはコツが必要です。
Bootstrapのglyphicons-halflings.pngを読み込むのに暫く悩んだのでそのメモなど。
フォルダ構成は次のようになっています。（Mavenです）
root +-- src +-- webapp +-- resources +-- css | +-- bootstrap.min.css +-- img +-- glyphicons-halflings.png  JSFなのでXHTMLを使い、CSSの読み込みは以下のようにします。
&lt;h:outputStylesheet library=&quot;css&quot; name=&quot;bootstrap.min.css&quot;/&gt;  このとき、bootstrap.min.css内のイメージのパスは../img/glyphicons-halflings.pngとなっていますが、 このままでは画像が読み込まれません。まあ、パスからも明らかですね。
問題を解決するには次のように、イメージのパスを変更する必要があります。
background-image:url(&quot;#{resource['img/glyphicons-halflings.png']}&quot;)  Jun 20, 2013 追記 twitterで@den2snさんに教えてもらったのですが、outputStylesheetを下記のようにlibraryを削除して宣言することにより、 bootstrap.min.cssを書き換えなくても良くなります。
&lt;h:outputStylesheet name=&quot;css/bootstrap.min.css&quot;/&gt;  </div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-06-07T01:41:00JST">Jun 7, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/06/07/cookie-on-jnlp/">cookie on java web start (JWS)</a></h2>
  </header>

  
  <div class="summary">今更感がありますが、JWSでのcookieの扱い、というかjsessionidの扱いについて。
JWSからサーバへの最初のアクセスでjsessionidの指定が無いと、サーバでjsessionidが発行されます。 すると、JWSからのそれ以降のアクセスには、その生成されたjsessionidがcookieとしてサーバに送信されます。 これは良く出来た仕組みで、プログラマが意識しなくてもセッションを継続することが可能になります。 ただ、自動でjsessionidを送信してしまうため、意図したセッションを継続させることが出来ないことがあります。
任意のjsessionidを送信したい 前提として以下のことが成り立っているとします。
 認証はプラウザで行う 認証状態をセッションで維持している  JWSでもその認証状態を維持したい、つまり認証されていなければJWSを操作させたくない場合、 簡単な方法としてJWS起動時にsessionidを渡せば、JWSからのリクエストにjsessionidを付与することが可能になり、 認証状態のあるセッションを継続することが出来るようになります。
例えば、以下のようにJWSからHttpURLConnectionを利用してリクエストを送信するケースですが、 HttpURLConection#setRequestProperty(String, String)を使うことによってcookieにjsessionidを含めることが可能です。 もちろん、URLの最後に;jsessionid=XXXXXという形でjsessionidを付けても問題ありません。 ちなみに、URLの最後に付けるのと、setRequestPropertyでの設定と両方の指定がある場合は、 setRequestPropertyの方が優先されます。
final HttpURLConnection connection = (HttpURLConnection) new URL(&quot;http://localhost/mycontext&quot;).openConnection(); connection.setRequestProperty(&quot;Cookie&quot;, &quot;JSESSIONID=&quot; + sessionid);  このリクエストがJWSからの最初のリクエストでは無く、かつ最初のリクエストでjsessionidを明示的に送っていない場合、 Cookieには2つのjsessionidが設定された状態でリクエストされます。 サーバではこの2つのjsessionidのうち、最初に設定されている方を有効と見なして処理が行われます。 よって、上記コードで明示的に設定したjsessionidが無視されることになります。
では、このケースで明示的に設定したjsessionidを有効にするにはどうしたら良いのか。
自動で設定されるcookieを無効にする 自動で設定されるcookieはCookieHandlerで設定されるようです。 なので、このCookieHandlerを機能させなくすれば、cookieが自動で設定されなくなるはず。 というわけで、下記のコードを追加します。
CookieHandler.setDefault(null);  これでcookieの自動設定が行われないはずなのですが、実はこのメソッド、セキュリティが all-permissionsでないと、AccessControlExceptionがスローされてしまいます。 JWSでall-permissionsにするには、jarファイルに署名しなければなりません。
最後に jarファイルに署名できないような政治的な事情がある場合はこの方法が取れないので、 JWSからの最初のリクエストにちゃんとjsessionidが付与されるようにしましょう。
まあ、署名するための証明書もオレオレ証明書じゃない場合は、 それなりに費用もかかるので、署名できないことも多い訳ですが&hellip; :P
それにしても、JNLPのこととか、JWSなどの記事が軒並み古いので、 もうほとんど使われてないのかなぁと思ったりした快晴の木曜日でした。
enjoy!</div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-05-27T01:12:00JST">May 27, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/05/27/how-to-cancel-drag-and-drop-on-esc-key/">how to cancel drag-and-drop on esc key</a></h2>
  </header>

  
  <div class="summary">Flex-4.5.1で、ツリーノードのDrag and DropをEscキーでキャンセルしてみよう、という話です。
標準機能としてはありませんが、これ以降のバージョンで対応されている可能性もあるという前提になります。
実はDrag and DropをEscキーを使ってキャンセルできることは知りませんでした。 Windowsでもできるようですが、普段使っているMacでもできることにさっき気がついたぐらいなので、 そんな操作を利用している人は少ないのではないかと思ってました。 ですが、検索してみると意外と多くの人が利用しているようです。
実装する 機能が無いので実装することにします。
&lt;?xml version=&quot;1.0&quot;?&gt; &lt;s:Application xmlns:fx=&quot;http://ns.adobe.com/mxml/2009&quot; xmlns:s=&quot;library://ns.adobe.com/flex/spark&quot; xmlns:mx=&quot;library://ns.adobe.com/flex/mx&quot; creationComplete=&quot;creationComplete(event)&quot;&gt; &lt;fx:Script&gt;&lt;![CDATA[ import mx.events.FlexEvent; import mx.managers.DragManager; import mx.managers.dragClasses.DragProxy; protected function creationComplete(event:FlexEvent):void { addEventListener(KeyboardEvent.KEY_DOWN, function (event:KeyboardEvent):void { if (event.keyCode == Keyboard.ESCAPE) { DragManager.acceptDragDrop(null); myTree.hideDropFeedback(null); myTree.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP)); var dragProxy:DragProxy = DragManager.mx_internal::dragProxy; if (dragProxy) { dragProxy.mouseUpHandler(new MouseEvent(MouseEvent.MOUSE_UP)); } } }); } ]]&gt;&lt;/fx:Script&gt; &lt;s:layout&gt; &lt;s:HorizontalLayout/&gt; &lt;/s:layout&gt; &lt;mx:Tree id=&quot;myTree&quot; width=&quot;200&quot; height=&quot;300&quot; dragMoveEnabled=&quot;true&quot; dragEnabled=&quot;true&quot; dropEnabled=&quot;true&quot; labelField=&quot;@label&quot;&gt; &lt;mx:XMLListCollection id=&quot;treeData&quot;&gt; &lt;fx:XMLList&gt; &lt;node label=&quot;Mail Box&quot;&gt; &lt;node label=&quot;Inbox&quot;&gt; &lt;node label=&quot;AAAAA&quot;/&gt; &lt;node label=&quot;BBBBB&quot;/&gt; &lt;node label=&quot;CCCCC&quot;/&gt; &lt;/node&gt; &lt;node label=&quot;Outbox&quot;&gt; &lt;node label=&quot;DDDDD&quot;/&gt; &lt;node label=&quot;EEEEE&quot;/&gt; &lt;/node&gt; &lt;/node&gt; &lt;/fx:XMLList&gt; &lt;/mx:XMLListCollection&gt; &lt;/mx:Tree&gt; &lt;/s:Application&gt;  大したことはしてなくて、重要なのは下記の部分。</div>

  
  <footer>
    <a href="https://kokuzawa.github.io/blog/2013/05/27/how-to-cancel-drag-and-drop-on-esc-key/" title="how to cancel drag-and-drop on esc key">Read More…</a>
  </footer>
  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-04-01T22:35:00JST">Apr 1, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/04/01/edit-breakpoints/">Edit breakpoint of the IntelliJ IDEA</a></h2>
  </header>

  
  <div class="summary">IntelliJも他のIDE同様デバッグが簡単にできます。
もちろん複数のスレッドを同時にデバッグできるのですが、初期設定だと一つのスレッドが終わるまですべてのスレッドがSuspendされます。 最初はこういうものかなと思っていたんですが、設定で切り替えることができるようです。
手順 ブレークポイントをCtrl+クリックしてEditメニューを選択します。
表示されたポップアップのSuspendのところ、Allにチェックが入っていると思います。 これをThreadに変更します。もし今後すべての動作をThreadにするのであれば、右にある「Make Default」ボタンをクリックします。
これでスレッド毎にSuspendされるようになりました。
Best regards,
Katsumi</div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-03-24T12:32:00JST">Mar 24, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/03/24/jersey-on-glassfish4/">jersey on glassfish-4</a></h2>
  </header>

  
  <div class="summary">GlassFish-4を使ってみたらJerseyのパッケージが変わってた。 GlassFish-3.1.2.2までは以下のようにcom.sunパッケージにあるJerseyのサーブレットがロードできていたけど、
&lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt; &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt; &lt;/servlet&gt;  GlassFish-4ではcom.sunパッケージにJerseyはなく、org.glassfishのパッケージとなっている。
&lt;servlet-name&gt;jersey-serlvet&lt;/servlet-name&gt; &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt; &lt;/servlet&gt;  </div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-03-21T00:04:00JST">Mar 21, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/03/21/generate-glassfish-web-dot-xml-automatically/">IntelliJ IDEAでglassfish-web.xmlを自動生成するには</a></h2>
  </header>

  
  <div class="summary">NetBeansだとsun-web.xmlとして自動生成されるファイルのことです。 JavaEE6のドキュメントを読む限り、 glassfish-web.xmlが正式名称のようですが&hellip;。
このファイル、通常は必要ないのですが、GlassFishのBASIC認証とかDIGEST認証にJDBCレルムを使おうとすると必要になります。 XMLファイルなので、DTDのパスとか&hellip;まあその辺の入力が面倒な訳で、テンプレートは検索すれば見つかりますけど、出来ればIntelliJで生成できないかなと。
手順 画面上部のツールバーからProject Structureを選択。もしくはCmd+;
表示された画面からModules-&gt;Webと選択し、右ペイン中にあるAdd Aplication Server specific descriptorボタンをクリック。
表示されたポップアップのApplication ServerをGlassfish Serverに、Descriptorは選択肢が2つで最後にOracleとなっている方を選択。 (以下のイメージでは既にOracleを設定済みなのでSunしか表示されていない。)
これでglassfish-web.xmlのテンプレートが自動生成される。
glassfish-web.xml:
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;!DOCTYPE glassfish-web-app PUBLIC &quot;-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN&quot; &quot;http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd&quot;&gt; &lt;glassfish-web-app&gt; &lt;/glassfish-web-app&gt;  あとはここに必要な記述を追加して行くだけ。IntelliJは補完が強力なので、ここまでファイルが出来てくれれば後は楽。</div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-03-11T23:59:00JST">Mar 11, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/03/11/delete-all-of-git-branches/">Gitで複数のブランチを一括削除するには</a></h2>
  </header>

  
  <div class="summary">ブランチがこんな感じにある場合を想定します。
$ git branch TEST-001 TEST-002 master  TEST-001とTEST-002の作業は終わったので、ブランチを削除したい。 ただ、ブランチ削除のコマンドを2回実行するのは面倒。 そんなときは次のコマンドを実行すると一括で削除可能です。
$ git branch | grep TEST | xargs git branch -d  ブランチを削除する場合、ブランチ名にワイルドカードが使えません。 なので、コマンドをパイプでつなげて一括削除を実現します。
便利ですね :)</div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-01-27T12:08:00JST">Jan 27, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/01/27/performance-of-jpa/">Performance of JPA</a></h2>
  </header>

  
  <div class="summary"> JPAはJavaSE上でも動作するので、DBアクセスをする場合、最近はもっぱらJDBCではなくJPAを利用している。 サーバサイドを利用しない、クライアントアプリでDBアクセスをするのは、主にデータ移行ツールとかが多く、 ひとつのトランザクション内で処理されるレコード数が数万レコードになる事が多い。
数万レコードを移行する為に、JPAを利用した移行ツールを作り、実データでテストをしたところ、 想定外のパフォーマンス劣化が発生し、その解決に幾分か時間が掛かってしまった。 そのため、パフォーマンスが劣化する状況とその解決方法を簡易に示す為の簡易なコードを作成、備忘録として残しておく。
アプリ構成 JavaはJDK7、JPAの実装はEclipseLink-2.3.2を利用。DBはDerby。
コード 検証に利用するコードは下記の通り。 Bookエンティティを1万レコード永続化する。この際、永続化だけではパフォーマンスの劣化を確認できないため、 永続化されたBookエンティティのうち、bookname='name1'のレコードを抽出する。 また、検証に利用する為に、ループ1回の処理時間(ms)をファイルに出力する。
 検証 まず改善前の結果。縦軸は処理時間(ms)、横軸は回数。 約5,000回で一度速度が改善しているが、全体的に右肩上がりで処理時間が劣化している。 簡易なコードであり、処理時間が数msのため、このままでも致命的な状況にならないかもしれないが、 tachされたエンティティの数が増加すると、それに比例して劣化していく。
次に改善後の結果。 約5,000回で速度が改善するのは同じだが、一定速度以上の劣化は起こらず安定している。
改善方法 では、何をすれば改善するのか。 結論から言えば、エンティティをdetachすれば良い。 detachすることによってエンティティはエンティティマネージャの管理外になり、通常のJavaのオブジェクトになる。 そのため、同期のためのオーバヘッドがなくなり、パフォーマンスが改善するのだと考えられるが確証はないので、 あとでEclipseLinkのソースコードを確認してみようと思う。 ただし、これによりDBとの同期は行えなくなるため、detachをする位置には注意が必要。
検証コードでは、ループ内の最後に下記2行を追加した。
em.flush(); em.clear();  em.flush()を呼び出しているのは、Bookエンティティが永続化される前にdetachされるのを回避するため。 ただし、これも注意が必要で、リレーション関係のあるエンティティを両方とも永続化しようとするケース等で、 片方をpersist、他方をpersistする前にflushしてしまうと、他方の永続化時にエラーが発生してしまう。
ちなみにflushやclearに関しては次の本が詳しい。
 </div>

  
</article>
</li>
      
      <li><article class="li">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2013-01-13T18:46:00JST">Jan 13, 2013</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kokuzawa.github.io/blog/">blog</a></li>
      
    </ul>
    <h2 class="title"><a href="https://kokuzawa.github.io/blog/2013/01/13/facesmessagetobootstrap/">Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0</a></h2>
  </header>

  
  <div class="summary">JSFのMessagesコンポーネントは、Managed Beanで設定されたFacesMessageを出力する為のコンポーネントです。 出力方法は、listとTableの二つのレイアウトを利用した方法があり、デフォルトはlistレイアウトです。 listレイアウトは以下のような出力になります。
(Bootstrapのalert alert-errorを適用)
これに対してTableレイアウトは以下のような出力になります。
どちらもエラーを表示するには十分ですが、ユーザとしては確認したらエラー情報を消したいところです。 MessagesコンポーネントはHTMLをカスタマイズする事ができません。 正確にはレンダラをカスタマイズすれば、出力するHTMLを書き換える事が出来ますし、 そういった情報を扱ったブログもありますが、Messagesレンダラのカスタマイズは、 com.sunパッケージのクラスを継承して拡張する必要があり、JSFの実装依存のコードになってしまいます。 もちろん独自で一からレンダラを書いても良いのですが、あまり現実的ではありません。 そこで、標準のMessagesコンポーネントではなくBootstrapのAlertsコンポーネントを使うことにします。
BootstrapのAlertsコンポーネントはクローズボタンを表示する事ができます。 このクローズボタンをクリックする事により、エラー情報を消すことができます。 クローズボタンを出すには、HTMLを下記のように記載する必要があります。
&lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;Summary Message&lt;/h4&gt; Detail Message &lt;/div&gt;  これをJSF合成コンポーネントにします。 webapp/resources/bootstrapフォルダを作成し、alert.xhtmlファイルを配置します。(フォルダ構成はMavenです)
alert.xhtml:
&lt;?xml version='1.0' encoding='UTF-8' ?&gt; &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:cc=&quot;http://java.sun.com/jsf/composite&quot; xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;&gt; &lt;!-- INTERFACE --&gt; &lt;cc:interface&gt; &lt;/cc:interface&gt; &lt;!-- IMPLEMENTATION --&gt; &lt;cc:implementation&gt; &lt;c:forEach var=&quot;message&quot; items=&quot;#{facesContext.messageList}&quot;&gt; &lt;c:if test=&quot;#{message.severity == 'ERROR 2'}&quot;&gt; &lt;div class=&quot;alert alert-error&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;&amp;times;&lt;/button&gt; &lt;h4&gt;#{message.</div>

  
  <footer>
    <a href="https://kokuzawa.github.io/blog/2013/01/13/facesmessagetobootstrap/" title="Convert the Alerts component of &#39;Bootstrap&#39; to a component of JSF 2.0">Read More…</a>
  </footer>
  
</article>
</li>
      
    </ul>

    
<nav>
  <ul class="pager">

    
    <li><a href="https://kokuzawa.github.io/blog/page/5/">Previous</a></li>
    

    
    <li><a href="https://kokuzawa.github.io/blog/page/7/">Next</a></li>
    

  </ul>
</nav>



  </div>
  <div class="col-md-4">
    
<aside class="l-sidebar">

  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">LATESTS</div>
    </div>
    <div class="list-group">
      
      <a href="https://kokuzawa.github.io/blog/2017/12/04/primefaces-dblclick/" class="list-group-item">PrimeFaces-6.1 Dblclick Event</a>
      
      <a href="https://kokuzawa.github.io/about/" class="list-group-item">About</a>
      
      <a href="https://kokuzawa.github.io/blog/2017/11/24/my-first-post/" class="list-group-item">Hugoで始めるブログ生活</a>
      
      <a href="https://kokuzawa.github.io/blog/2017/01/12/jsf-2-3-websocket/" class="list-group-item">JSF 2.3 の Websocket を試す</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/12/28/primeng/" class="list-group-item">PrimeNGを組み込む</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/12/28/intellij-ideaangular2/" class="list-group-item">IntelliJ IDEAでAngular2アプリを動かす</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/12/25/opendialog-of-primefaces/" class="list-group-item">Dialog of PrimeFaces</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/12/15/httpurlconnection/" class="list-group-item">HttpURLConnectionで嵌った話</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/12/14/remotecommand-in-composite/" class="list-group-item">remoteCommand in Composite</a>
      
      <a href="https://kokuzawa.github.io/blog/2016/10/20/java-freemarker-noparse/" class="list-group-item">FreeMarkerでinterpolation部分をそのまま出力</a>
      
    </div>
  </section>

  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">CATEGORY</div>
    </div>
    <div class="list-group">
      
    </div>
  </section>
  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">TAG</div>
    </div>
    <div class="list-group">
      
      <a href="https://kokuzawa.github.io/tags/java" class="list-group-item">java</a>
      
      <a href="https://kokuzawa.github.io/tags/jsf" class="list-group-item">jsf</a>
      
      <a href="https://kokuzawa.github.io/tags/javaee" class="list-group-item">javaee</a>
      
      <a href="https://kokuzawa.github.io/tags/wildfly" class="list-group-item">wildfly</a>
      
      <a href="https://kokuzawa.github.io/tags/javafx" class="list-group-item">javafx</a>
      
      <a href="https://kokuzawa.github.io/tags/jax-rs" class="list-group-item">jax-rs</a>
      
      <a href="https://kokuzawa.github.io/tags/jpa" class="list-group-item">jpa</a>
      
      <a href="https://kokuzawa.github.io/tags/glassfish" class="list-group-item">glassfish</a>
      
      <a href="https://kokuzawa.github.io/tags/intellij-idea" class="list-group-item">intellij-idea</a>
      
      <a href="https://kokuzawa.github.io/tags/mac" class="list-group-item">mac</a>
      
    </div>
  </section>
  

</aside>


  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="container">
        <p><span class="h-logo">&copy; Katsumi Kokuzawa&#39;s Blog</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_beg">Beg</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

